
{% extends "layout.html" %}

{% macro _location(params) %}
<p class="govuk-body">
  We've matched the postcode <span class="govuk-!-font-weight-bold">{{ params.postcode | upper }}</span> to <span class="govuk-!-font-weight-bold">{{ params.placeName }}</span>.
</p>
{% endmacro %}

{% block pageTitle %}
  {{ serviceName }}
{% endblock %}

{% block beforeContent %}
  {% include "includes/phase-banner.html" %}
  {{ govukBackLink({
    text: "Back",
    href: "/"
  }) }}
{% endblock %}

{% block content %}

  {% set commingSoon = date | date('YYYY-MM-DD') | dateDiff(restriction.start_date, 'days') %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <h1 class="govuk-heading-xl">
        {%- if location.country in ['Scotland','Wales','Northern Ireland'] %}
          There might be restrictions in this area
        {% else %}
          {% if commingSoon %}
            The Local COVID Alert Level is changing soon
          {% else %}
            {%- if location | length %}
              {%- if restriction.alert_level %}
                Local COVID Alert Level: {{ restriction.alert_level | getAlertLevel }}
              {% else %}
                Local COVID Alert Level: {{ 1 | getAlertLevel }}
              {% endif -%}
            {% else %}
              There is no information about the restrictions in this area
            {% endif -%}
          {% endif -%}
        {% endif -%}
      </h1>

      {%- if location.country === 'Scotland' %}

        {%- if location.district | length %}
          {{ _location({
            postcode: data.postcode,
            placeName: location.district
          }) }}
        {% endif -%}

        {{ govukPubActionLink({
          heading: {
            href: 'https://www.gov.scot/coronavirus-covid-19/',
            text: 'Find out what you can or cannot do from the Scottish Government.'
          },
          classes: "govuk-pub-action-link--simple govuk-!-margin-bottom-5"
        }) }}

      {% elif location.country === 'Wales' %}

        {%- if location.district | length %}
          {{ _location({
            postcode: data.postcode,
            placeName: location.district
          }) }}
        {% endif -%}

        {{ govukPubActionLink({
          heading: {
            href: 'https://gov.wales/local-lockdown',
            text: 'Find out what you can or cannot do from the Welsh Government.'
          },
          classes: "govuk-pub-action-link--simple govuk-!-margin-bottom-5"
        }) }}

      {% elif location.country === 'Northern Ireland' %}

        {%- if location.district | length %}
          {{ _location({
            postcode: data.postcode,
            placeName: location.district
          }) }}
        {% endif -%}

        {{ govukPubActionLink({
          heading: {
            href: 'https://www.nidirect.gov.uk/articles/coronavirus-covid-19-regulations-and-localised-restrictions',
            text: 'Find out what you can or cannot do from the Northern Ireland Government.'
          },
          classes: "govuk-pub-action-link--simple govuk-!-margin-bottom-5"
        }) }}

      {% else -%}

        {%- if location.district | length %}
          {{ _location({
            postcode: data.postcode,
            placeName: location.district
          }) }}
        {% endif -%}

        {% if commingSoon %}

          <p class="govuk-body">
            At the moment this area is in Local COVID Alert Level: {{ (restriction.alert_level - 1) | getAlertLevel if restriction.alert_level else '1' | getAlertLevel }}.
          </p>

          {{ govukPubActionLink({
            heading: {
              href: 'https://www.gov.uk/government/collections/local-restrictions-areas-with-an-outbreak-of-coronavirus-covid-19',
              text: 'What you can and cannot do now.'
            },
            classes: "govuk-pub-action-link--simple govuk-!-margin-bottom-5"
          }) }}

          <p class="govuk-body">
            From the {{ restriction.start_date | date('DD MMMM') }} this area will be in Local COVID Alert Level: {{ restriction.alert_level | getAlertLevel if restriction.alert_level else '1' | getAlertLevel }}.
          </p>

          {{ govukPubActionLink({
            heading: {
              href: 'https://www.gov.uk/' + restriction.guidance.link,
              text: 'What you can and cannot do from ' + restriction.start_date | date('DD MMMM') + '.'
            },
            classes: "govuk-pub-action-link--simple govuk-!-margin-bottom-5"
          }) }}

        {% else %}

          {%- if location | length %}

            <p class="govuk-body">
              This area is in Local COVID Alert Level: {{ restriction.alert_level | getAlertLevel if restriction.alert_level else '1' | getAlertLevel }}.
            </p>

            {%- if restriction.alert_level %}

              {{ govukPubActionLink({
                heading: {
                  href: 'https://www.gov.uk/' + restriction.guidance.link,
                  text: 'What you can and cannot do.'
                },
                classes: "govuk-pub-action-link--simple govuk-!-margin-bottom-5"
              }) }}

            {% else %}

              {{ govukPubActionLink({
                heading: {
                  href: 'https://www.gov.uk/government/collections/local-restrictions-areas-with-an-outbreak-of-coronavirus-covid-19',
                  text: 'What you can and cannot do.'
                },
                classes: "govuk-pub-action-link--simple govuk-!-margin-bottom-5"
              }) }}

            {% endif -%}

          {% else %}

            {{ govukPubActionLink({
              heading: {
                href: 'https://www.gov.uk/government/collections/local-restrictions-areas-with-an-outbreak-of-coronavirus-covid-19',
                text: 'All coronavirus infomation about what you can and cannot do.'
              },
              classes: "govuk-pub-action-link--simple govuk-!-margin-bottom-5"
            }) }}

          {% endif -%}

        {% endif -%}

      {% endif -%}

      <h2 class="govuk-heading-m govuk-!-margin-top-9">
        If you travel to other areas {{- ' in England' if location.country in ['Scotland','Wales','Northern Ireland'] }}
      </h2>

      <p class="govuk-body">
        <a class="govuk-link" href="/">Enter another postcode</a> to find out what restrictions there are.
      </p>

    </div>
    <div class="govuk-grid-column-one-third">
      {#% include "includes/related-navigation.html" %#}
    </div>
  </div>

{% endblock %}
